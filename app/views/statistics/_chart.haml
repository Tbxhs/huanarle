%script{ :type => 'text/javascript', :src => 'https://www.google.com/jsapi' }
:javascript    
  // Load the Visualization API and the piechart package.
  google.load('visualization', '1.0', {'packages':['corechart']});
  
  // Set a callback to run when the Google Visualization API is loaded.
  google.setOnLoadCallback(drawPieChart);

  // Callback that creates and populates a data table, 
  // instantiates the pie chart, passes in the data and
  // draws it.
  function drawPieChart() {

    // Get Data.
    // Create the data table.
    var data = new google.visualization.DataTable();
    data.addColumn('string', 'Topping');
    data.addColumn('number', 'Slices');
    data.addRows(#{@chart_ary});

    // Set chart options
    var options = {'title':'我的总消费结构图',
                   'width':400,
                   'height':300};

    // Instantiate and draw our chart, passing in some options.
    var chart = new google.visualization.PieChart(document.getElementById('chart_area_div'));
    chart.draw(data, options);

  }
  google.load('visualization', '1.0', {'packages':['corechart']});
  google.setOnLoadCallback(drawAreaChart);

  function drawAreaChart() {
    var data = google.visualization.arrayToDataTable([
      ['Year', 'Sales', 'Expenses'],
      ['2004',  1000,      400],
      ['2005',  1170,      460],
      ['2006',  660,       1120],
      ['2007',  1030,      540]
    ]);

    var options = {
      title: 'Company Performance',
      hAxis: {title: 'Year',  titleTextStyle: {color: 'red'}}
    };

    var area_chart = new google.visualization.AreaChart(document.getElementById('chart_pie_div'));
    area_chart.draw(data, options);
  }

#chart_area_div{ :style => 'width:400px;height:300px;' }
#chart_pie_div{ :style => 'width:400px;height:300px;' }